<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><!-- Tutorial Title Here --></title>
    <style>
        /* Sidebar styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 240px;
            background: rgba(255,255,255,0.97);
            box-shadow: 2px 0 24px rgba(0,0,0,0.08);
            z-index: 200;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(.4,2,.6,1);
            overflow-y: auto;
            padding-top: 60px;
        }
        .sidebar.open {
            transform: translateX(0);
        }
        .sidebar h2 {
            font-size: 1.2rem;
            font-weight: 700;
            margin: 1.5rem 1.5rem 1rem 1.5rem;
            color: #007bff;
        }
        .sidebar ul {
            list-style: none;
            padding: 0 1.5rem;
        }
        .sidebar ul li {
            margin-bottom: 1rem;
        }
        .sidebar ul li a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            display: block;
            transition: background 0.2s, color 0.2s;
        }
        .sidebar ul li a:hover, .sidebar ul li a.active {
            background: #e3f2fd;
            color: #007bff;
        }
        .sidebar-toggle {
            position: fixed;
            top: 8px;
            left: 20px;
            z-index: 300;
            background: #007bff;
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        .sidebar-toggle:hover {
            background: #005fa3;
        }
        @media (max-width: 700px) {
            .sidebar {
                width: 80vw;
                min-width: 180px;
            }
        }
        body.sidebar-open {
            overflow: hidden;
        }
        .sidebar-backdrop {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.18);
            z-index: 199;
        }
        .sidebar.open ~ .sidebar-backdrop {
            display: block;
        }
        /* Push content when sidebar open */
        .sidebar.open ~ .main-content {
            margin-left: 240px;
            transition: margin-left 0.3s cubic-bezier(.4,2,.6,1);
        }
        @media (max-width: 700px) {
            .sidebar.open ~ .main-content {
                margin-left: 0;
            }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            /* Summer sea vibe gradient: multi-color */
            background: linear-gradient(to bottom, 
                #ffffff 0%,
                #00F2FF 30%,
                #00b8ff 40%,
                #00719c 70%,
                #00415a 100%
            );
            min-height: 100vh;
        }
        

        /* Gradient animation matching main page */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            25% {
                background-position: 100% 0%;
            }
            50% {
                background-position: 100% 50%;
            }
            75% {
                background-position: 0% 100%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Enhanced floating particles animation */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(52, 152, 219, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 165, 0, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(26, 188, 156, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(155, 89, 182, 0.08) 0%, transparent 50%);
            animation: floatingParticles 15s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes floatingParticles {
            0%, 100% {
                transform: translateY(0px) rotate(0deg) scale(1);
                opacity: 0.8;
            }
            33% {
                transform: translateY(-30px) rotate(120deg) scale(1.1);
                opacity: 0.6;
            }
            66% {
                transform: translateY(30px) rotate(240deg) scale(0.9);
                opacity: 0.4;
            }
        }

        /* Navigation matching main page style */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        nav a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        nav a:hover, nav a.active {
            color: #007bff;
            background: rgba(0, 123, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Tutorial Container with modern styling */
        .tutorial-container {
            max-width: 1000px;
            margin: 2rem auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            padding: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeInUp 0.8s ease;
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Tutorial header styling */
        .tutorial-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding: 2rem 0;
        }

        .tutorial-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            border-radius: 2px;
        }

        .tutorial-header h1 {
            color: #222;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            margin-top: 1rem;
            position: relative;
        }

        .tutorial-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: #666;
            font-size: 0.9rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .tutorial-meta span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1.1rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            color: #fff;
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%); /* Default: fluorescent green-blue */
            border: none;
            box-shadow: 0 2px 12px rgba(0,255,180,0.10);
            letter-spacing: 0.5px;
        }

        .difficulty-badge {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .difficulty-badge.difficulty-beginner {
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%); /* Fluorescent green-blue */
            color: #003c2f;
        }

        .difficulty-badge.difficulty-intermediate {
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%); /* Fluorescent yellow-orange */
            color: #7a4f00;
        }

        .difficulty-badge.difficulty-advanced {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%); /* Fluorescent red-orange */
            color: #fff;
        }

        .tutorial-meta span:nth-child(2) {
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%); /* Yellow-orange */
            color: #7a4f00;
        }

        .tutorial-meta span:nth-child(3) {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%); /* Red-orange */
            color: #fff;
        }

        .tutorial-meta span:nth-child(4) {
            background: linear-gradient(90deg, #00eaff 0%, #00ffb0 100%); /* Blue-green */
            color: #003c2f;
        }

        /* Content styling */
        .tutorial-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #444;
        }

        .tutorial-content h1 {
            color: #222;
            font-size: 2.2rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .tutorial-content h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            border-radius: 2px;
        }

        .tutorial-content h2 {
            color: #007bff;
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .tutorial-content h3 {
            color: #0056b3;
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .tutorial-content h4 {
            color: #495057;
            font-size: 1.2rem;
            margin-top: 1.2rem;
            margin-bottom: 0.6rem;
            font-weight: 600;
        }

        .tutorial-content p {
            margin-bottom: 1.2rem;
            color: #555;
        }

        .tutorial-content ul, .tutorial-content ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
            color: #555;
        }

        .tutorial-content li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .tutorial-content blockquote {
            background: rgba(0, 123, 255, 0.05);
            border-left: 4px solid #007bff;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
            color: #0056b3;
            font-style: italic;
            position: relative;
        }

        .tutorial-content blockquote::before {
            content: '"';
            font-size: 3rem;
            color: #007bff;
            position: absolute;
            top: -0.5rem;
            left: 1rem;
            opacity: 0.3;
        }

        /* Code blocks styling */
        .tutorial-content pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tutorial-content code {
            background: rgba(0, 123, 255, 0.08);
            color: #0056b3;
            border-radius: 4px;
            padding: 0.2rem 0.4rem;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.98em;
        }

        .tutorial-content pre code {
            background: none;
            color: inherit;
            padding: 0;
            border-radius: 0;
        }

        /* Links styling */
        .tutorial-content a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .tutorial-content a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            transition: width 0.3s ease;
        }

        .tutorial-content a:hover::after {
            width: 100%;
        }

        .tutorial-content a:hover {
            color: #0056b3;
        }

        /* Images styling */
        .tutorial-content img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            margin: 1.5rem 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Tables styling */
        .tutorial-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .tutorial-content th, .tutorial-content td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 123, 255, 0.1);
        }

        .tutorial-content th {
            background: linear-gradient(45deg, #007bff, #00bcd4);
            color: white;
            font-weight: 600;
        }

        .tutorial-content tr:hover {
            background: rgba(0, 123, 255, 0.05);
        }

        /* CTA Button styling - clear orange with white text */
        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(90deg, #00d0ff 0%, #3cff53 100%);
            color: #fff;
            text-decoration: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,152,0,0.15);
            margin: 1rem 0;
        }

        .cta-button:hover {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%);
            color: #fff;
            box-shadow: 0 8px 24px rgba(255,60,60,0.18);
        }

        .tutorial-content a.cta-button {
            color: #fff !important;
        }

        /* Navigation buttons - keep style but more visible */
        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #7a4f00;
            text-decoration: none;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%);
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(90deg, #ff9800 0%, #ff3c3c 100%);
            color: #fff;
        }

        /* Navigation links - keep both buttons on one line, at both sides */
        .tutorial-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(0, 123, 255, 0.2);
        }

        /* Make the 'Next Tutorial' button green */
        .nav-button.next-tutorial {
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%);
            color: #003c2f;
        }

        .nav-button.next-tutorial:hover {
            background: linear-gradient(90deg, #ff9800 0%, #ff3c3c 100%);
            color: #fff;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tutorial-container {
                margin: 1rem;
                padding: 2rem 1.5rem;
            }

            .tutorial-header h1 {
                font-size: 2rem;
            }

            .tutorial-meta {
                flex-direction: column;
                gap: 1rem;
            }

            .tutorial-content h1 {
                font-size: 1.8rem;
            }

            .tutorial-content h2 {
                font-size: 1.5rem;
            }

            nav ul {
                gap: 1rem;
                padding: 0 1rem;
            }

            .tutorial-nav {
                flex-direction: column;
                gap: 1rem;
            }

            .tutorial-content pre {
                font-size: 0.8rem;
                padding: 1rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }
            
            body::before {
                display: none;
            }
            
            .tutorial-container {
                box-shadow: none;
                border: 1px solid #ddd;
                background: white;
            }
            
            nav {
                display: none;
            }
        }

        /* Prism.js overrides for better integration */
        .tutorial-content pre[class*="language-"] {
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            font-size: 1rem;
            margin: 1.5rem 0;
            padding: 1.2rem 1rem;
            overflow-x: auto;
        }
    </style>
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <!-- Navigation -->
    <button class="sidebar-toggle" id="sidebarToggle" title="Show chapters" aria-label="Show chapters">â˜°</button>
    <nav>
        <ul>
            <li><a href="../../index.html">Home</a></li>
            <li><a href="../../portfolio.html">Portfolio</a></li>
            <li><a href="../index.html" class="active">Tutorials</a></li>
            <li><a href="../../blog/index.html">Blog</a></li>
        </ul>
    </nav>

    <div class="sidebar" id="sidebarNav">
        <h2>Chapters</h2>
        <ul id="sidebarChapters"></ul>
    </div>
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>
    <div class="main-content">
    <div class="tutorial-container">
        <!-- Tutorial Header -->
        <div class="tutorial-header">
            <h1>ğŸ“¡ ROS 2 Topics Tutorial - Complete Beginner's Guide
</h1>
            <div class="tutorial-meta">
                <span class="difficulty-badge difficulty-beginner">Beginner<!-- Beginner | Intermediate | Advanced --></span>
                <span>â±ï¸ 1.5 hours<!-- Duration (e.g., 2-3 hours) --></span>
                <span>ğŸ“… August 2025<!-- Date (e.g., January 2025) --></span>
                <span>ğŸ·ï¸ Ros 2<!-- Tags (e.g., ROS 2, Python, Robotics) --></span>
            </div>
        </div>

        <!-- Tutorial Content -->
        <div class="tutorial-content">
            <!--
                HOW TO USE THIS TEMPLATE (Markdown):
                ===================================
                
                1. Write your tutorial content between the <script type="text/markdown" id="md-raw"> tags below.
                2. Do NOT indent your Markdown content. Start each line at the very beginning (no spaces or tabs).
                3. Indented lines will render as code blocks!
                
                Example (correct):
                <script type="text/markdown" id="md-raw">
# My Tutorial Title
Welcome!
- List item
</script>
                
                Example (incorrect):
                <script type="text/markdown" id="md-raw">
    # My Tutorial Title
    Welcome!
    - List item
</script>
                
                Supported Markdown: # ## ###, **bold**, *italic*, [links](url), ![img](url), code blocks, lists, blockquotes, tables, ---
            -->
            
            <script type="text/markdown" id="md-raw">

## ğŸ“š Table of Contents

1. [ğŸ¯ Learning Objectives](#-learning-objectives)
2. [ğŸ§  Understanding Topics - The Complete Picture](#-understanding-topics---the-complete-picture)
   - [ğŸ“» The Radio Station Analogy (Extended)](#-the-radio-station-analogy-extended)
   - [ğŸ”„ Key Concepts Visualized](#-key-concepts-visualized)
   - [ğŸŒ Multiple Publishers & Subscribers](#-multiple-publishers--subscribers)
3. [ğŸ› ï¸ Environment Setup](#-environment-setup)
   - [ğŸ—ï¸ Create Your Workspace](#-create-your-workspace)
   - [ğŸ“¦ Understanding Package Structure](#-understanding-package-structure)
4. [ğŸ“¤ Part 1: Creating Publishers](#-part-1-creating-publishers)
   - [ğŸ Python Publisher - Detailed Walkthrough](#-python-publisher---detailed-walkthrough)
   - [âš¡ C++ Publisher - Detailed Walkthrough](#-c-publisher---detailed-walkthrough)
   - [ğŸš€ Build and Test Publishers](#-build-and-test-publishers)
5. [ğŸ“¥ Part 2: Creating Subscribers](#-part-2-creating-subscribers)
   - [ğŸ Python Subscriber - Step by Step](#-python-subscriber---step-by-step)
   - [âš¡ C++ Subscriber - Detailed Implementation](#-c-subscriber---detailed-implementation)
   - [ğŸ”§ Update Build Configuration](#-update-build-configuration)
   - [ğŸ§ª Test Publisher-Subscriber Communication](#-test-publisher-subscriber-communication)
6. [ğŸ” Part 3: Debugging and Visualization Tools](#-part-3-debugging-and-visualization-tools)
   - [ğŸ•¸ï¸ Visual Network Analysis with rqt_graph](#-visual-network-analysis-with-rqt_graph)
   - [ğŸ› ï¸ Command Line Debugging Tools](#-command-line-debugging-tools)
   - [ğŸ¬ Recording and Replaying Data](#-recording-and-replaying-data)
7. [ğŸ¨ Part 4: Custom Message Types](#-part-4-custom-message-types)
   - [ğŸ—ï¸ Create Interface Package](#-create-interface-package)
   - [ğŸ“ Define Custom Messages](#-define-custom-messages)
   - [âš™ï¸ Configure Interface Package](#-configure-interface-package)
   - [ğŸ”¨ Build and Test Interfaces](#-build-and-test-interfaces)
   - [ğŸ¯ Using Custom Messages in Code](#-using-custom-messages-in-code)
8. [ğŸš€ Part 5: Real-World Application - Turtle Controller](#-part-5-real-world-application---turtle-controller)
   - [ğŸ¯ Application Overview](#-application-overview)
   - [ğŸ Python Turtle Controller](#-python-turtle-controller)
   - [âš¡ C++ Turtle Controller](#-c-turtle-controller)
   - [ğŸ”§ Update Build Files](#-update-build-files)
   - [ğŸ§ª Test the Turtle Controller](#-test-the-turtle-controller)
9. [ğŸ“ˆ Advanced Topics and Tips](#-advanced-topics-and-tips)
   - [ğŸ·ï¸ Renaming Topics at Runtime](#-renaming-topics-at-runtime)
   - [âš™ï¸ Quality of Service (QoS) Settings](#-quality-of-service-qos-settings)
   - [ğŸ” Message Filtering and Processing](#-message-filtering-and-processing)
10. [ğŸ”§ Troubleshooting Common Issues](#-troubleshooting-common-issues)
    - [âŒ "No module named" errors](#-no-module-named-errors)
    - [ğŸ“¡ Messages not being received](#-messages-not-being-received)
    - [âš¡ Build errors in C++](#-build-errors-in-c)
11. [ğŸ“‹ Summary and Next Steps](#-summary-and-next-steps)
    - [âœ… What You've Learned](#-what-youve-learned)
    - [ğŸ’ª Practice Exercises](#-practice-exercises)

---

## ğŸ¯ Learning Objectives
By the end of this tutorial, you will be able to:
- âœ… Understand what topics are and how they work
- âœ… Create publishers in Python and C++
- âœ… Create subscribers in Python and C++
- âœ… Use ROS 2 debugging tools
- âœ… Create custom message types
- âœ… Build a real robot control application

---

## ğŸ§  Understanding Topics - The Complete Picture

### ğŸ“» The Radio Station Analogy (Extended)

Imagine a city with multiple radio stations and listeners:

```
ğŸ¢ Radio Station WXYZ (98.7 FM) ğŸ“¡ Broadcasting Music
    â†“ â†“ â†“ (AM/FM signals)
ğŸ“± Phone    ğŸš— Car Radio    ğŸ“» Home Radio
```

**In ROS 2 Terms:**
- ğŸ¢ **Radio Station** = Publisher Node
- ğŸ“¡ **Frequency (98.7)** = Topic Name
- ğŸµ **Music/News** = Message Data
- ğŸ“» **AM/FM** = Message Interface/Type
- ğŸ“± **Listeners** = Subscriber Nodes

### ğŸ”„ Key Concepts Visualized

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    ğŸ“¤ Topic: /temperature    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SENSOR NODE   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   DISPLAY NODE  â”‚
â”‚  (Publisher)    â”‚         Float64: 25.3Â°C      â”‚  (Subscriber)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Important Rules:**
1. ğŸ·ï¸ **Same Topic Name**: Both must use exactly the same topic name
2. ğŸ”§ **Same Interface**: Both must use the same message type (like AM/FM)
3. ğŸ‘» **Anonymous**: Publishers don't know who's listening
4. ğŸš€ **Real-time**: Messages are sent immediately when published

### ğŸŒ Multiple Publishers & Subscribers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”€â”€â”
â”‚ Temperature  â”‚   â”‚    ğŸ“¤ Topic: /robot_status
â”‚ Sensor       â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                            â”‚
                   â”‚                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Battery      â”‚ â”€â”€â”˜                     â”‚ Dashboard   â”‚
â”‚ Monitor      â”‚                         â”‚ Display     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â–¼
                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                         â”‚ Data Logger â”‚
                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Environment Setup

### ğŸ—ï¸ Create Your Workspace
```bash
# Create workspace structure
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src

# Create packages for both Python and C++
ros2 pkg create my_py_tutorial --build-type ament_python --dependencies rclpy
ros2 pkg create my_cpp_tutorial --build-type ament_cmake --dependencies rclcpp
```

### ğŸ“¦ Understanding Package Structure

```
ros2_ws/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ my_py_tutorial/          ğŸ Python Package
â”‚   â”‚   â”œâ”€â”€ package.xml
â”‚   â”‚   â”œâ”€â”€ setup.py
â”‚   â”‚   â””â”€â”€ my_py_tutorial/
â”‚   â”‚       â””â”€â”€ __init__.py
â”‚   â””â”€â”€ my_cpp_tutorial/         âš¡ C++ Package  
â”‚       â”œâ”€â”€ package.xml
â”‚       â”œâ”€â”€ CMakeLists.txt
â”‚       â”œâ”€â”€ src/                 (C++ source files)
â”‚       â””â”€â”€ include/             (C++ header files)
â”œâ”€â”€ build/                       ğŸ”¨ Build artifacts
â”œâ”€â”€ log/                         ğŸ“ Build logs
â””â”€â”€ install/                     ğŸ“¦ Installed packages
```

---

## ğŸ“¤ Part 1: Creating Publishers

### ğŸ Python Publisher - Detailed Walkthrough

#### Step 1: Create the File Structure
```bash
cd ~/ros2_ws/src/my_py_tutorial/my_py_tutorial/
touch number_publisher.py
chmod +x number_publisher.py
```

#### Step 2: Understanding the Code Line by Line

Create `number_publisher.py`:

```python
#!/usr/bin/env python3
# â˜ï¸ Shebang: Tells system this is a Python3 script

# ğŸ“¦ Import necessary libraries
import rclpy                           # Core ROS 2 Python library
from rclpy.node import Node           # Base class for all nodes
from example_interfaces.msg import Int64  # Message type we'll use

class NumberPublisher(Node):           # ğŸ—ï¸ Our node class inherits from Node
    def __init__(self):
        # ğŸ·ï¸ Initialize parent class with node name
        super().__init__("number_publisher")
        
        # ğŸ“Š Initialize our counter
        self.counter_ = 0
        
        # ğŸ“¡ Create publisher:
        #   - Int64: message type
        #   - "number": topic name  
        #   - 10: queue size (buffer for messages)
        self.publisher_ = self.create_publisher(Int64, "number", 10)
        
        # â° Create timer to publish every 1.0 seconds
        self.timer_ = self.create_timer(1.0, self.publish_number)
        
        # ğŸ“ Log that we started successfully
        self.get_logger().info("ğŸš€ Number Publisher started!")

    def publish_number(self):
        # ğŸ“¨ Create new message
        msg = Int64()
        msg.data = self.counter_  # stores the integer value you want to send.
                                  # you will get familiar with this when you create custom messages.
        
        # ğŸ“¤ Send the message
        self.publisher_.publish(msg)
        
        # ğŸ“ Log what we sent
        self.get_logger().info(f"ğŸ“Š Published: {self.counter_}")
        
        # â• Increment for next message
        self.counter_ += 1

def main(args=None):
    # ğŸ”§ Initialize ROS 2
    rclpy.init(args=args)
    
    # ğŸ—ï¸ Create our node
    node = NumberPublisher()
    
    # ğŸ”„ Keep node running and processing callbacks
    rclpy.spin(node)
    
    # ğŸ›‘ Cleanup when done
    rclpy.shutdown()

if __name__ == "__main__":
    main()
```

#### Step 3: Configure Package for Building

Edit `setup.py` in the package root:

```python
from setuptools import setup

package_name = 'my_py_tutorial'

setup(
    name=package_name,
    version='0.0.0',
    packages=[package_name],
    data_files=[
        ('share/ament_index/resource_index/packages',
            ['resource/' + package_name]),
        ('share/' + package_name, ['package.xml']),
    ],
    install_requires=['setuptools'],
    zip_safe=True,
    maintainer='your_name',
    maintainer_email='your_email@example.com',
    description='ROS 2 Topics Tutorial Package',
    license='Apache License 2.0',
    tests_require=['pytest'],
    entry_points={
        'console_scripts': [
            # ğŸ¯ This creates executable commands
            # Format: "executable_name = package_name.file_name:function_name"
            "number_publisher = my_py_tutorial.number_publisher:main",
        ],
    },
)
```

### âš¡ C++ Publisher - Detailed Walkthrough

#### Step 1: Create the File Structure
```bash
cd ~/ros2_ws/src/my_cpp_tutorial/src/
touch number_publisher.cpp
```

#### Step 2: Understanding C++ Code Structure

Create `number_publisher.cpp`:

```cpp
// ğŸ“¦ Include necessary headers
#include "rclcpp/rclcpp.hpp"                    // Core ROS 2 C++ library
#include "example_interfaces/msg/int64.hpp"    // Message type

// ğŸ§© Use namespace to avoid typing std:: everywhere
using namespace std::chrono_literals;

class NumberPublisher : public rclcpp::Node    // ğŸ—ï¸ Inherit from Node
{
public:
    NumberPublisher() : Node("number_publisher")  // ğŸ·ï¸ Constructor with node name
    {
        // ğŸ“Š Initialize counter
        counter_ = 0;
        
        // ğŸ“¡ Create publisher with template syntax
        // <MessageType> then (topic_name, queue_size)
        publisher_ = this->create_publisher<example_interfaces::msg::Int64>(
            "number", 10);
        
        // â° Create timer - C++ uses chrono literals (1s = 1 second)
        timer_ = this->create_wall_timer(
            1s, std::bind(&NumberPublisher::publish_number, this));
            
        // ğŸ“ Log startup message
        RCLCPP_INFO(this->get_logger(), "ğŸš€ Number Publisher started!");
    }

private:
    // ğŸ”§ Private method for publishing
    void publish_number()
    {
        // ğŸ“¨ Create message using auto (compiler figures out type)
        auto msg = example_interfaces::msg::Int64();
        msg.data = counter_;
        
        // ğŸ“¤ Publish message
        publisher_->publish(msg);
        
        // ğŸ“ Log what we sent (C++ printf-style)
        RCLCPP_INFO(this->get_logger(), "ğŸ“Š Published: %d", counter_);
        
        // â• Increment counter
        counter_++;
    }
    
    // ğŸ§° Member variables (private)
    rclcpp::TimerBase::SharedPtr timer_;
    rclcpp::Publisher<example_interfaces::msg::Int64>::SharedPtr publisher_;
    int counter_;
};

int main(int argc, char * argv[])
{
    // ğŸ”§ Initialize ROS 2
    rclcpp::init(argc, argv);
    
    // ğŸ—ï¸ Create node and keep it running
    rclcpp::spin(std::make_shared<NumberPublisher>());
    
    // ğŸ›‘ Cleanup
    rclcpp::shutdown();
    return 0;
}
```
**Question 1**: ğŸš¦ Why do we need a queue buffer?
<details>
<Summary>Click to expand</Summary>

When your node publishes messages, ROS 2 needs to decide what happens if subscribers cannot keep up.
- Imagine your publisher is sending 100 messages per second
- But the subscriber can only process 50 messages per second
Without a queue, messages would be lost immediately.
The queue (buffer) holds a few messages temporarily so the subscriber has a chance to catch up.
</details>

<div style="text-align:center; margin: 0.05em 0;">
    <span style="font-size:1.2em; color:#2196F3;">&#9679;</span>
    <span style="font-size:1.2em; color:#4CAF50;">&#9679;</span>
    <span style="font-size:1.2em; color:#FF9800;">&#9679;</span>
</div>

**Question 2**: âœ… Why you write this-> in C++ but not in Python?
<details>
<Summary>Click to expand</Summary>

In **Python**, when youâ€™re inside a class, you just write:

```python
self.publisher_ = self.create_publisher(Int64, "number", 10)
```

because Python automatically looks inside **self**.


In **C++**, when you are inside a class that inherits from `rclcpp::Node`, the method `create_publisher` comes from the base class (`rclcpp::Node`).

But C++ **templates** can cause an issue:  
When you write just `create_publisher`, the compiler doesnâ€™t always know that this name comes from the base class, because of how **dependent names** work in templates.

So you explicitly write:

```cpp
this->create_publisher<...>()
```

to tell the compiler:  
ğŸ‘‰ â€œLook in the base class of this object to find `create_publisher`.â€


âš¡ **In simple words**

`this->` means **â€œcall the function that belongs to this object (and its base classes)â€**.  

Without `this->`, the compiler might get confused and throw errors like:

```
no matching function for call to create_publisher
```

### ğŸ§© Example

```cpp
class MyNode : public rclcpp::Node {
public:
    MyNode() : Node("my_node") {
        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);
    }

private:
    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;
};
```

If you remove `this->`, it may not compile:

```cpp
publisher_ = create_publisher<std_msgs::msg::String>("topic", 10); // âŒ maybe error
```

ğŸ‘‰ So in **Python** you use `self`.  
ğŸ‘‰ In **C++** you use `this->` (especially when templates are involved).

</details>

<div style="text-align:center; margin: 0.05em 0;">
    <span style="font-size:1.2em; color:#2196F3;">&#9679;</span>
    <span style="font-size:1.2em; color:#4CAF50;">&#9679;</span>
    <span style="font-size:1.2em; color:#FF9800;">&#9679;</span>
</div>

**Question 3**: ğŸ§  Why use bind for the callback in C++?
<details>
<Summary>Click to expand</Summary>

### The Simple Answer
`std::bind` takes a function and "glues" it together with some arguments to create a new callable function.

### Why do we need it?

#### Regular function (works fine):
```cpp
void say_hello() {
    std::cout << "Hello!\n";
}

// Can pass directly to timer
timer = create_timer(1s, say_hello);  âœ…
```

### Class member function (problem):
```cpp
class Person {
public:
    void say_hello() {
        std::cout << "Hello!\n";
    }
};

// This WON'T work:
timer = create_timer(1s, say_hello);  âŒ
// Compiler asks: "Which person's say_hello?"
```

### The Solution

**Both lines go INSIDE the class** (usually in constructor or a member function):

```cpp
class Person {
public:
    void say_hello() {
        std::cout << "Hello!\n";
    }
    
    void setup_timer() {  // This runs inside the class
        auto callable = std::bind(&Person::say_hello, this);
        timer = create_timer(1s, callable);  âœ…
    }
    
private:
    // timer member variable
};
```

**OR more commonly, do it in one line:**
```cpp
void setup_timer() {
    timer = create_timer(1s, std::bind(&Person::say_hello, this));
}
```

### What bind does:
1. Takes a member function: `&Person::say_hello`
2. Takes an object: `this` (which person)
3. Creates a new function that remembers both

### Your ROS2 example:
```cpp
timer_ = this->create_wall_timer(
    1s, std::bind(&NumberPublisher::publish_number, this));
```

**Translation**: "Every 1 second, call `publish_number` on THIS specific NumberPublisher object"

### Modern Alternative (Lambda):
```cpp
timer_ = this->create_wall_timer(
    1s, [this]() { publish_number(); });
```

Same result, cleaner syntax!

</details>


----

#### Step 3: Configure C++ Package for Building

Edit `CMakeLists.txt`:

**check and modify these key sections:**
1. find_package (*find required packages*)
2. add_executable (*create executable*)
3. ament_target_dependencies (*link dependencies to executable*)
4. install (*install executable so ros2 run can find it*)

```cmake
cmake_minimum_required(VERSION 3.8)
project(my_cpp_tutorial)

# ğŸ” Find required packages
find_package(ament_cmake REQUIRED)
find_package(rclcpp REQUIRED)
find_package(example_interfaces REQUIRED)

# ğŸ”¨ Create executable
add_executable(number_publisher src/number_publisher.cpp)

# ğŸ”— Link dependencies to executable
ament_target_dependencies(number_publisher 
  rclcpp 
  example_interfaces
)

# ğŸ“¦ Install executable so ros2 run can find it
install(TARGETS
  number_publisher
  DESTINATION lib/${PROJECT_NAME}
)

ament_package()
```

### ğŸš€ Build and Test Publishers

```bash
# ğŸ”¨ Build packages
cd ~/ros2_ws
colcon build --packages-select my_py_tutorial my_cpp_tutorial

# ğŸ”„ Source the workspace (makes executables available)
source install/setup.bash

# ğŸ§ª Test Python publisher
ros2 run my_py_tutorial number_publisher

# ğŸ§ª Test C++ publisher (in another terminal)
ros2 run my_cpp_tutorial number_publisher
```

**ğŸ” Debug Commands to Verify:**
```bash
# ğŸ“‹ List all topics
ros2 topic list

# ğŸ‘‚ Listen to the topic
ros2 topic echo /number

# â„¹ï¸ Get topic information
ros2 topic info /number
```

---

## ğŸ“¥ Part 2: Creating Subscribers

### ğŸ Python Subscriber - Step by Step

#### Step 1: Create Subscriber File
```bash
cd ~/ros2_ws/src/my_py_tutorial/my_py_tutorial/
touch number_subscriber.py
chmod +x number_subscriber.py
```

#### Step 2: Subscriber Code Explanation

Create `number_subscriber.py`:

```python
#!/usr/bin/env python3

import rclpy
from rclpy.node import Node
from example_interfaces.msg import Int64

class NumberSubscriber(Node):
    def __init__(self):
        super().__init__("number_subscriber")
        
        # ğŸ“Š Initialize our running total
        self.total_ = 0
        self.count_ = 0
        
        # ğŸ“¥ Create subscriber:
        #   - Int64: message type (must match publisher!)
        #   - "number": topic name (must match publisher!)
        #   - self.number_callback: function to call when message arrives
        #   - 10: queue size
        self.subscription_ = self.create_subscription(
            Int64,
            "number", 
            self.number_callback,
            10
        )
        
        # ğŸ“ Prevent unused variable warning
        self.subscription_  # prevent unused variable warning
        
        self.get_logger().info("ğŸ‘‚ Number Subscriber started! Listening...")

    def number_callback(self, msg):
        """
        ğŸ¯ This function runs AUTOMATICALLY whenever a message arrives!
        The 'msg' parameter contains the received data.
        """
        # ğŸ“Š Update our statistics
        self.total_ += msg.data
        self.count_ += 1
        average = self.total_ / self.count_
        
        # ğŸ“ Log detailed information
        self.get_logger().info(
            f"ğŸ“¥ Received: {msg.data} | "
            f"Total: {self.total_} | "
            f"Count: {self.count_} | "
            f"Average: {average:.2f}"
        )

def main(args=None):
    rclpy.init(args=args)
    node = NumberSubscriber()
    
    # ğŸ”„ This keeps the node alive and processing callbacks
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        print("\nğŸ›‘ Subscriber stopped by user")
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == "__main__":
    main()
```

### âš¡ C++ Subscriber - Detailed Implementation

#### Step 1: Create Subscriber File
```bash
cd ~/ros2_ws/src/my_cpp_tutorial/src/
touch number_subscriber.cpp
```

#### Step 2: C++ Subscriber Code

Create `number_subscriber.cpp`:

```cpp
#include "rclcpp/rclcpp.hpp"
#include "example_interfaces/msg/int64.hpp"

class NumberSubscriber : public rclcpp::Node
{
public:
    NumberSubscriber() : Node("number_subscriber")
    {
        // ğŸ“Š Initialize statistics
        total_ = 0;
        count_ = 0;
        
        // ğŸ“¥ Create subscriber with lambda callback
        subscription_ = this->create_subscription<example_interfaces::msg::Int64>(
            "number",
            10,
            // ğŸ¯ Lambda function - modern C++ way to define callback
            [this](const example_interfaces::msg::Int64::SharedPtr msg) {
                this->number_callback(msg);
            });
            
        RCLCPP_INFO(this->get_logger(), "ğŸ‘‚ Number Subscriber started! Listening...");
    }

private:
    void number_callback(const example_interfaces::msg::Int64::SharedPtr msg)
    {
        // ğŸ“Š Update statistics  
        total_ += msg->data;  // Note: -> because msg is a pointer
        count_++;
        double average = static_cast<double>(total_) / count_;
        
        // ğŸ“ Log detailed information
        RCLCPP_INFO(this->get_logger(), 
            "ğŸ“¥ Received: %ld | Total: %ld | Count: %d | Average: %.2f",
            msg->data, total_, count_, average);
    }
    
    // ğŸ§° Member variables
    rclcpp::Subscription<example_interfaces::msg::Int64>::SharedPtr subscription_;
    long total_;
    int count_;
};

int main(int argc, char * argv[])
{
    rclcpp::init(argc, argv);
    
    // ğŸ¯ Alternative way to create and spin node
    auto node = std::make_shared<NumberSubscriber>();
    
    try {
        rclcpp::spin(node);
    } catch (const std::exception& e) {
        RCLCPP_ERROR(rclcpp::get_logger("main"), "Exception: %s", e.what());
    }
    
    rclcpp::shutdown();
    return 0;
}
```

### ğŸ”§ Update Build Configuration

Update `setup.py` for Python:
```python
entry_points={
    'console_scripts': [
        "number_publisher = my_py_tutorial.number_publisher:main",
        "number_subscriber = my_py_tutorial.number_subscriber:main",  # â• Add this
    ],
},
```

Update `CMakeLists.txt` for C++:
```cmake
# â• Add subscriber executable
add_executable(number_subscriber src/number_subscriber.cpp)
ament_target_dependencies(number_subscriber rclcpp example_interfaces)

# ğŸ“¦ Install both executables
install(TARGETS
  number_publisher
  number_subscriber  # â• Add this
  DESTINATION lib/${PROJECT_NAME}
)
```

### ğŸ§ª Test Publisher-Subscriber Communication

```bash
# ğŸ”¨ Build with new subscriber
cd ~/ros2_ws
colcon build --packages-select my_py_tutorial my_cpp_tutorial
source install/setup.bash

# ğŸ§ª Test 1: Python to Python communication
# Terminal 1:
ros2 run my_py_tutorial number_publisher

# Terminal 2:  
ros2 run my_py_tutorial number_subscriber

# ğŸ§ª Test 2: Cross-language communication (Python publisher â†’ C++ subscriber)
# Terminal 1:
ros2 run my_py_tutorial number_publisher

# Terminal 2:
ros2 run my_cpp_tutorial number_subscriber
```

**ğŸ‰ Success Indicators:**
- Publisher shows: `ğŸ“Š Published: 0, 1, 2, 3...`
- Subscriber shows: `ğŸ“¥ Received: 0 | Total: 0 | Count: 1 | Average: 0.00`

---

## ğŸ” Part 3: Debugging and Visualization Tools

### ğŸ•¸ï¸ Visual Network Analysis with rqt_graph

```bash
# ğŸ¨ Launch visual graph tool
rqt_graph
```

**ğŸ”§ Configuration Tips:**
1. âœ… Check "Nodes/Topics (all)"
2. âŒ Uncheck "Dead sinks" 
3. âŒ Uncheck "Leaf topics"
4. ğŸ”„ Click refresh to update

**What You'll See:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    /number    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ number_publisherâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚number_subscriberâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ› ï¸ Command Line Debugging Tools

```bash
# ğŸ“‹ List all active topics
ros2 topic list
# Output: /number, /parameter_events, /rosout

# â„¹ï¸ Get detailed topic information
ros2 topic info /number
# Shows: message type, publisher count, subscriber count

# ğŸ“– See message structure
ros2 interface show example_interfaces/msg/Int64
# Shows: int64 data

# ğŸ‘‚ Listen to topic from command line
ros2 topic echo /number

# ğŸ“¤ Publish to topic from command line
ros2 topic pub -r 2 /number example_interfaces/msg/Int64 "{data: 42}"
# -r 2 means publish at 2 Hz (twice per second)

# ğŸ“Š Monitor topic frequency and bandwidth
ros2 topic hz /number
ros2 topic bw /number
```

### ğŸ¬ Recording and Replaying Data

```bash
# ğŸ“¹ Record topic data to file
mkdir ~/ros2_bags
cd ~/ros2_bags
ros2 bag record /number -o my_experiment

# â¸ï¸ Stop recording with Ctrl+C

# â„¹ï¸ Get information about recorded bag
ros2 bag info my_experiment

# â–¶ï¸ Replay recorded data
ros2 bag play my_experiment

# ğŸ”„ Replay at different speeds
ros2 bag play my_experiment --rate 0.5  # Half speed
ros2 bag play my_experiment --rate 2.0  # Double speed
```

---

## ğŸ¨ Part 4: Custom Message Types

### ğŸ—ï¸ Create Interface Package

```bash
cd ~/ros2_ws/src
ros2 pkg create my_robot_interfaces --build-type ament_cmake
cd my_robot_interfaces

# ğŸ—‘ï¸ Remove unnecessary directories
rm -rf src include

# ğŸ“ Create message directory
mkdir msg
```

### ğŸ“ Define Custom Messages

#### Step 1: Create Robot Status Message

Create `msg/RobotStatus.msg`:
```
# ğŸ¤– Robot Status Message
# This message contains comprehensive robot information

# ğŸ·ï¸ Robot identification
string robot_name

# ğŸ”‹ Power system
float64 battery_voltage
float64 battery_percentage
bool is_charging

# ğŸ® Motion system  
bool is_moving
float64 current_speed
geometry_msgs/Twist current_velocity

# ğŸŒ¡ï¸ Environmental sensors
float64 temperature
float64 humidity

# âš ï¸ System status
int32 error_code
string error_message
bool[] system_health  # Array of health flags

# ğŸ“… Timestamp
builtin_interfaces/Time stamp
```

#### Step 2: Create Sensor Reading Message

Create `msg/SensorReading.msg`:
```
# ğŸ“Š Generic Sensor Reading Message

# ğŸ·ï¸ Sensor identification
string sensor_name
string sensor_type

# ğŸ“ˆ Data
float64 value
string unit

# ğŸ“Š Statistics
float64 min_value
float64 max_value
float64 average_value

# âœ… Quality indicators
bool is_valid
float64 confidence_level

# ğŸ“… Timing
builtin_interfaces/Time timestamp
```

### âš™ï¸ Configure Interface Package

Edit `package.xml`:
```xml
<?xml version="1.0"?>
<package format="3">
  <name>my_robot_interfaces</name>
  <version>0.0.0</version>
  <description>Custom interfaces for robot tutorial</description>
  <maintainer email="you@example.com">Your Name</maintainer>
  <license>Apache License 2.0</license>

  <buildtool_depend>ament_cmake</buildtool_depend>
  
  <!-- ğŸ”§ Interface generation dependencies -->
  <build_depend>rosidl_default_generators</build_depend>
  <exec_depend>rosidl_default_runtime</exec_depend>
  <member_of_group>rosidl_interface_packages</member_of_group>
  
  <!-- ğŸ“¦ Dependencies for message fields -->
  <build_depend>geometry_msgs</build_depend>
  <build_depend>builtin_interfaces</build_depend>
  <exec_depend>geometry_msgs</exec_depend>
  <exec_depend>builtin_interfaces</exec_depend>

  

  <export>
    <build_type>ament_cmake</build_type>
  </export>
</package>
```

### Dependency Types

### `<depend>` - Use for most things
- Needed for **both** building AND running
- **Most common choice**
```xml
<depend>rclpy</depend>      <!-- Python: need to build and run -->
<depend>rclcpp</depend>     <!-- C++: need to build and run -->
<depend>std_msgs</depend>   <!-- Messages: need to build and run -->
```

### `<build_depend>` - Only needed to build
- Only needed during compilation
- Rare to use alone
```xml
<build_depend>some_build_tool</build_depend>
```

### `<exec_depend>` - Only needed to run
- Not needed during build
- Example: launch files, runtime tools
```xml
<exec_depend>robot_state_publisher</exec_depend>
```

<div style="text-align:center; margin: 0.05em 0;">
    <span style="font-size:1.2em; color:#2196F3;">&#9679;</span>
    <span style="font-size:1.2em; color:#4CAF50;">&#9679;</span>
    <span style="font-size:1.2em; color:#FF9800;">&#9679;</span>
</div>

Edit `CMakeLists.txt`:
```cmake
cmake_minimum_required(VERSION 3.8)
project(my_robot_interfaces)

# ğŸ” Find packages
find_package(ament_cmake REQUIRED)
find_package(rosidl_default_generators REQUIRED)
find_package(geometry_msgs REQUIRED)
find_package(builtin_interfaces REQUIRED)

# ğŸ“ Generate interfaces
# The DEPENDENCIES line makes ALL listed packages available to ALL your message files.
rosidl_generate_interfaces(${PROJECT_NAME}
  "msg/RobotStatus.msg"
  "msg/SensorReading.msg"
  DEPENDENCIES geometry_msgs builtin_interfaces
)

ament_export_dependencies(rosidl_default_runtime)
ament_package()
```

### ğŸ”¨ Build and Test Interfaces

```bash
cd ~/ros2_ws
colcon build --packages-select my_robot_interfaces
source install/setup.bash

# ğŸ§ª Test your new interfaces
ros2 interface show my_robot_interfaces/msg/RobotStatus
ros2 interface show my_robot_interfaces/msg/SensorReading
```

### ğŸ¯ Using Custom Messages in Code

#### ğŸ Python Example with Custom Messages

Create `robot_status_publisher.py`:

```python
#!/usr/bin/env python3

import rclpy
from rclpy.node import Node
from my_robot_interfaces.msg import RobotStatus
from geometry_msgs.msg import Twist
from builtin_interfaces.msg import Time
import time

class RobotStatusPublisher(Node):
    def __init__(self):
        super().__init__("robot_status_publisher")
        
        # ğŸ“¡ Create publisher for custom message
        self.publisher_ = self.create_publisher(
            RobotStatus, 
            "robot_status", 
            10
        )
        
        # â° Publish status every 2 seconds
        self.timer_ = self.create_timer(2.0, self.publish_status)
        
        # ğŸ“Š Robot state variables
        self.battery_level_ = 100.0
        self.temperature_ = 25.0
        self.is_moving_ = False
        
        self.get_logger().info("ğŸ¤– Robot Status Publisher started!")

    def publish_status(self):
        # ğŸ“¨ Create complex message
        msg = RobotStatus()
        
        # ğŸ·ï¸ Robot identification
        msg.robot_name = "TutorialBot"
        
        # ğŸ”‹ Battery simulation (decreasing over time)
        self.battery_level_ = max(0.0, self.battery_level_ - 0.5)
        msg.battery_voltage = 12.0 * (self.battery_level_ / 100.0)
        msg.battery_percentage = self.battery_level_
        msg.is_charging = self.battery_level_ < 20.0
        
        # ğŸ® Motion status
        msg.is_moving = self.is_moving_
        msg.current_speed = 1.5 if self.is_moving_ else 0.0
        
        # ğŸŒŠ Create Twist message for velocity
        twist = Twist()
        twist.linear.x = msg.current_speed
        twist.angular.z = 0.2 if self.is_moving_ else 0.0
        msg.current_velocity = twist
        
        # ğŸŒ¡ï¸ Environmental data
        msg.temperature = self.temperature_
        msg.humidity = 45.0
        
        # âš ï¸ System status
        msg.error_code = 0 if self.battery_level_ > 10.0 else 1001
        msg.error_message = "OK" if msg.error_code == 0 else "Low battery warning"
        msg.system_health = [True, True, self.battery_level_ > 10.0, True]
        
        # ğŸ“… Timestamp
        now = self.get_clock().now()
        msg.stamp = now.to_msg()
        
        # ğŸ“¤ Publish message
        self.publisher_.publish(msg)
        
        self.get_logger().info(
            f"ğŸ“Š Published robot status: "
            f"Battery: {msg.battery_percentage:.1f}%, "
            f"Temp: {msg.temperature}Â°C, "
            f"Status: {msg.error_message}"
        )
        
        # ğŸ”„ Toggle movement state occasionally
        if int(time.time()) % 6 == 0:
            self.is_moving_ = not self.is_moving_

def main():
    rclpy.init()
    node = RobotStatusPublisher()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        print("ğŸ›‘ Robot Status Publisher stopped")
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == "__main__":
    main()
```

Don't forget to update `setup.py`:
```python
entry_points={
    'console_scripts': [
        "number_publisher = my_py_tutorial.number_publisher:main",
        "number_subscriber = my_py_tutorial.number_subscriber:main",
        "robot_status_publisher = my_py_tutorial.robot_status_publisher:main",
    ],
},
```

And add dependency to `package.xml`:
```xml
<depend>my_robot_interfaces</depend>
<depend>geometry_msgs</depend>
<depend>builtin_interfaces</depend>
```

---

## ğŸš€ Part 5: Real-World Application - Turtle Controller

Let's build a complete application that controls the turtlesim turtle using topics!

### ğŸ¯ Application Overview

```
ğŸ“Š Turtle Position â”€â”€â”€â”€â–¶ ğŸ§  Controller Logic â”€â”€â”€â”€â–¶ ğŸ® Movement Commands
   (Subscriber)              (Processing)              (Publisher)
```

### ğŸ Python Turtle Controller

Create `turtle_controller.py`:

```python
#!/usr/bin/env python3

import rclpy
from rclpy.node import Node
from geometry_msgs.msg import Twist
from turtlesim.msg import Pose
import math

class TurtleController(Node):
    def __init__(self):
        super().__init__("turtle_controller")
        
        # ğŸ® Publisher for turtle movement commands
        self.cmd_publisher_ = self.create_publisher(
            Twist, 
            "/turtle1/cmd_vel", 
            10
        )
        
        # ğŸ“ Subscriber for turtle position
        self.pose_subscriber_ = self.create_subscription(
            Pose,
            "/turtle1/pose",
            self.pose_callback,
            10
        )
        
        # ğŸ¯ Target position (center of screen)
        self.target_x_ = 5.5
        self.target_y_ = 5.5
        self.target_radius_ = 2.0
        
        # ğŸ“Š Control parameters
        self.linear_gain_ = 2.0
        self.angular_gain_ = 6.0
        self.angle_offset_ = 0.0
        
        self.get_logger().info("ğŸ¢ Turtle Controller started! Making turtle dance...")

    def pose_callback(self, pose: Pose):
        """
        ğŸ¯ Main control logic - runs every time turtle position updates
        """
        # ğŸ“ Calculate distance to target
        distance_to_target = math.sqrt(
            (pose.x - self.target_x_) ** 2 + 
            (pose.y - self.target_y_) ** 2
        )
        
        # ğŸ¨ Create movement command
        cmd = Twist()
        
        if distance_to_target > 0.1:
            # Move towards target
            angle_to_target = math.atan2(
                self.target_y_ - pose.y,
                self.target_x_ - pose.x
            )
            
            angle_error = angle_to_target - pose.theta
            
            # Normalize angle to [-pi, pi]
            while angle_error > math.pi:
                angle_error -= 2 * math.pi
            while angle_error < -math.pi:
                angle_error += 2 * math.pi
            
            # Control commands
            cmd.linear.x = min(self.linear_gain_ * distance_to_target, 2.0)
            cmd.angular.z = self.angular_gain_ * angle_error
            
        else:
            # Circle around target
            self.angle_offset_ += 0.1
            
            # Calculate circular motion
            desired_x = self.target_x_ + self.target_radius_ * math.cos(self.angle_offset_)
            desired_y = self.target_y_ + self.target_radius_ * math.sin(self.angle_offset_)
            
            angle_to_desired = math.atan2(desired_y - pose.y, desired_x - pose.x)
            angle_error = angle_to_desired - pose.theta
            
            # Normalize angle
            while angle_error > math.pi:
                angle_error -= 2 * math.pi
            while angle_error < -math.pi:
                angle_error += 2 * math.pi
            
            cmd.linear.x = 1.5
            cmd.angular.z = self.angular_gain_ * angle_error + 1.0  # Add circular motion
        
        # Publish command
        self.cmd_publisher_.publish(cmd)
        
        # Log status every few messages
        if hasattr(self, 'log_counter_'):
            self.log_counter_ += 1
        else:
            self.log_counter_ = 0
            
        if self.log_counter_ % 10 == 0:
            self.get_logger().info(
                f"Turtle at ({pose.x:.2f}, {pose.y:.2f}), "
                f"Distance to target: {distance_to_target:.2f}"
            )

def main():
    rclpy.init()
    node = TurtleController()
    try:
        rclpy.spin(node)
    except KeyboardInterrupt:
        print("Turtle Controller stopped")
    finally:
        node.destroy_node()
        rclpy.shutdown()

if __name__ == "__main__":
    main()
```

### C++ Turtle Controller

Create `turtle_controller.cpp`:

```cpp
#include "rclcpp/rclcpp.hpp"
#include "geometry_msgs/msg/twist.hpp"
#include "turtlesim/msg/pose.hpp"
#include <cmath>

class TurtleController : public rclcpp::Node
{
public:
    TurtleController() : Node("turtle_controller")
    {
        // Publisher for movement commands
        cmd_publisher_ = this->create_publisher<geometry_msgs::msg::Twist>(
            "/turtle1/cmd_vel", 10);
        
        // Subscriber for turtle position
        pose_subscriber_ = this->create_subscription<turtlesim::msg::Pose>(
            "/turtle1/pose", 10,
            std::bind(&TurtleController::pose_callback, this, std::placeholders::_1));
        
        // Control parameters
        target_x_ = 5.5;
        target_y_ = 5.5;
        target_radius_ = 2.0;
        linear_gain_ = 2.0;
        angular_gain_ = 6.0;
        angle_offset_ = 0.0;
        log_counter_ = 0;
        
        RCLCPP_INFO(this->get_logger(), "Turtle Controller started! Making turtle dance...");
    }

private:
    void pose_callback(const turtlesim::msg::Pose::SharedPtr pose)
    {
        // Calculate distance to target
        double distance_to_target = sqrt(
            pow(pose->x - target_x_, 2) + 
            pow(pose->y - target_y_, 2)
        );
        
        auto cmd = geometry_msgs::msg::Twist();
        
        if (distance_to_target > 0.1) {
            // Move towards target
            double angle_to_target = atan2(
                target_y_ - pose->y,
                target_x_ - pose->x
            );
            
            double angle_error = angle_to_target - pose->theta;
            
            // Normalize angle to [-pi, pi]
            while (angle_error > M_PI) angle_error -= 2 * M_PI;
            while (angle_error < -M_PI) angle_error += 2 * M_PI;
            
            // Control commands
            cmd.linear.x = std::min(linear_gain_ * distance_to_target, 2.0);
            cmd.angular.z = angular_gain_ * angle_error;
            
        } else {
            // Circle around target
            angle_offset_ += 0.1;
            
            double desired_x = target_x_ + target_radius_ * cos(angle_offset_);
            double desired_y = target_y_ + target_radius_ * sin(angle_offset_);
            
            double angle_to_desired = atan2(desired_y - pose->y, desired_x - pose->x);
            double angle_error = angle_to_desired - pose->theta;
            
            // Normalize angle
            while (angle_error > M_PI) angle_error -= 2 * M_PI;
            while (angle_error < -M_PI) angle_error += 2 * M_PI;
            
            cmd.linear.x = 1.5;
            cmd.angular.z = angular_gain_ * angle_error + 1.0;
        }
        
        // Publish command
        cmd_publisher_->publish(cmd);
        
        // Log status periodically
        if (++log_counter_ % 10 == 0) {
            RCLCPP_INFO(this->get_logger(),
                "Turtle at (%.2f, %.2f), Distance to target: %.2f",
                pose->x, pose->y, distance_to_target);
        }
    }
    
    rclcpp::Publisher<geometry_msgs::msg::Twist>::SharedPtr cmd_publisher_;
    rclcpp::Subscription<turtlesim::msg::Pose>::SharedPtr pose_subscriber_;
    
    double target_x_, target_y_, target_radius_;
    double linear_gain_, angular_gain_;
    double angle_offset_;
    int log_counter_;
};

int main(int argc, char * argv[])
{
    rclcpp::init(argc, argv);
    rclcpp::spin(std::make_shared<TurtleController>());
    rclcpp::shutdown();
    return 0;
}
```

### Update Build Files

Add to Python `setup.py`:
```python
entry_points={
    'console_scripts': [
        "number_publisher = my_py_tutorial.number_publisher:main",
        "number_subscriber = my_py_tutorial.number_subscriber:main", 
        "robot_status_publisher = my_py_tutorial.robot_status_publisher:main",
        "turtle_controller = my_py_tutorial.turtle_controller:main",
    ],
},
```

Add to Python `package.xml`:
```xml
<depend>geometry_msgs</depend>
<depend>turtlesim</depend>
```

Add to C++ `CMakeLists.txt`:
```cmake
find_package(geometry_msgs REQUIRED)
find_package(turtlesim REQUIRED)

add_executable(turtle_controller src/turtle_controller.cpp)
ament_target_dependencies(turtle_controller rclcpp geometry_msgs turtlesim)

install(TARGETS
  number_publisher
  number_subscriber
  turtle_controller
  DESTINATION lib/${PROJECT_NAME}
)
```

### Test the Turtle Controller

```bash
# Build everything
cd ~/ros2_ws
colcon build
source install/setup.bash

# Terminal 1: Start turtlesim
ros2 run turtlesim turtlesim_node

# Terminal 2: Start controller
ros2 run my_py_tutorial turtle_controller
# OR
ros2 run my_cpp_tutorial turtle_controller
```

---

## Advanced Topics and Tips

### Renaming Topics at Runtime

```bash
# Change topic names without modifying code
ros2 run my_py_tutorial number_publisher --ros-args -r number:=my_numbers

# Change both node name and topic name
ros2 run my_py_tutorial number_publisher --ros-args -r __node:=pub1 -r number:=channel1
```

### Quality of Service (QoS) Settings

```python
from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy

# Create custom QoS profile
qos_profile = QoSProfile(
    reliability=ReliabilityPolicy.BEST_EFFORT,  # vs RELIABLE
    history=HistoryPolicy.KEEP_LAST,
    depth=1  # Keep only latest message
)

# Use in publisher/subscriber
self.publisher_ = self.create_publisher(Int64, "number", qos_profile)
```

### Message Filtering and Processing

```python
def number_callback(self, msg):
    # Filter messages
    if msg.data < 0:
        self.get_logger().warn(f"Ignoring negative number: {msg.data}")
        return
        
    # Process valid messages
    if msg.data % 2 == 0:
        self.get_logger().info(f"Even number received: {msg.data}")
    else:
        self.get_logger().info(f"Odd number received: {msg.data}")
```

---

## Troubleshooting Common Issues

### Problem: "No module named 'my_robot_interfaces'"
**Solution:**
```bash
cd ~/ros2_ws
colcon build --packages-select my_robot_interfaces
source install/setup.bash
```

### Problem: Messages not being received
**Checklist:**
1. Same topic names in publisher and subscriber
2. Same message types
3. Both nodes running
4. Workspace sourced in both terminals

**Debug commands:**
```bash
ros2 topic list
ros2 topic info /your_topic_name
rqt_graph
```

### Problem: Build errors in C++
**Common fixes:**
```cmake
# Make sure all dependencies are listed
find_package(rclcpp REQUIRED)
find_package(your_interface_package REQUIRED)

# And in ament_target_dependencies
ament_target_dependencies(your_executable
  rclcpp
  your_interface_package
)
```

---

## Summary and Next Steps

### What You've Learned
- Topics enable asynchronous communication between ROS 2 nodes
- Publishers send messages, subscribers receive them
- Both Python and C++ can be used interchangeably
- Custom message types provide structured data exchange
- Multiple debugging tools help development and troubleshooting

### Practice Exercises
1. Create a temperature sensor simulator that publishes random temperatures
2. Build a data logger that subscribes to multiple topics and saves to file
3. Implement a message relay that subscribes to one topic and republishes to another
4. Create a monitoring system that tracks message frequencies


            </script>
            
            <!-- The Markdown above will be rendered as HTML here -->
            <noscript>
                <div style="color: red; padding: 1rem; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px;">
                    <strong>JavaScript Required:</strong> Please enable JavaScript to view the tutorial content.
                </div>
            </noscript>
            <div id="md-content"></div>
        </div>

        <!-- Tutorial Navigation -->
        <div class="tutorial-nav">
            <a href="chapter_2_Docker.html" class="nav-button">
                â† Back to Tutorials
            </a>
            <a href="../../tutorials/index.html" class="nav-button next-tutorial">
                Next Tutorial â†’
            </a>
        </div>
    </div>
    </div>

    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script>
    // Sidebar toggle logic
    const sidebar = document.getElementById('sidebarNav');
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebarBackdrop = document.getElementById('sidebarBackdrop');
    function openSidebar() {
        sidebar.classList.add('open');
        document.body.classList.add('sidebar-open');
    }
    function closeSidebar() {
        sidebar.classList.remove('open');
        document.body.classList.remove('sidebar-open');
    }
    sidebarToggle.addEventListener('click', openSidebar);
    sidebarBackdrop.addEventListener('click', closeSidebar);
    // Close sidebar on ESC
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeSidebar();
    });
    // Simple markdown rendering logic with Prism.js and robust fallback
    document.addEventListener('DOMContentLoaded', function() {
        const mdScript = document.getElementById('md-raw');
        const mdContent = document.getElementById('md-content');
        if (mdScript && mdContent && window.marked) {
            marked.setOptions({
                gfm: true,
                breaks: true,
                smartLists: true,
                smartypants: true
            });
            mdContent.innerHTML = marked.parse(mdScript.textContent.trim());
            Prism.highlightAll();

            // Helper: Normalize string for ID comparison
            function normalizeId(str) {
                return str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
            }

            // --- Dynamic Sidebar Generation ---
            function buildSidebarFromHeadings() {
                const sidebarList = document.getElementById('sidebarChapters');
                if (!sidebarList) return;
                sidebarList.innerHTML = '';
                const headings = mdContent.querySelectorAll('h1, h2, h3');
                let lastLevel = 1;
                let parents = [sidebarList];
                headings.forEach(heading => {
                    const level = parseInt(heading.tagName[1]);
                    const text = heading.textContent;
                    let id = heading.id || normalizeId(text);
                    heading.id = id;
                    const li = document.createElement('li');
                    li.style.marginLeft = ((level-1)*16) + 'px';
                    const a = document.createElement('a');
                    a.href = '#' + id;
                    a.textContent = text;
                    li.appendChild(a);
                    sidebarList.appendChild(li);
                });
            }
            buildSidebarFromHeadings();

            // --- Smooth scroll for TOC links ---
            function attachSmoothScroll(links, container) {
                links.forEach(link => {
                    link.addEventListener('click', function(e) {
                        const href = this.getAttribute('href');
                        if (href && href.startsWith('#')) {
                            let target = document.getElementById(href.slice(1));
                            if (!target) {
                                const allHeadings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');
                                for (const heading of allHeadings) {
                                    if (normalizeId(heading.textContent) === normalizeId(href.slice(1))) {
                                        target = heading;
                                        break;
                                    }
                                }
                            }
                            if (target) {
                                e.preventDefault();
                                const nav = document.querySelector('nav');
                                const navHeight = nav ? nav.offsetHeight : 0;
                                const targetRect = target.getBoundingClientRect();
                                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                                const top = targetRect.top + scrollTop - navHeight - 10;
                                window.scrollTo({ top, behavior: 'smooth' });
                            }
                        }
                    });
                });
            }
            // Attach to links in markdown content
            attachSmoothScroll(mdContent.querySelectorAll('a[href^="#"]'), mdContent);
            // Attach to links in sidebar (use mdContent as container for headings)
            const sidebarList = document.getElementById('sidebarChapters');
            if (sidebarList) {
                attachSmoothScroll(sidebarList.querySelectorAll('a[href^="#"]'), mdContent);
            }

            // --- Highlight active section in sidebar ---
            function highlightActiveSidebar() {
                const headings = Array.from(mdContent.querySelectorAll('h1, h2, h3'));
                const sidebarLinks = Array.from(document.querySelectorAll('#sidebarChapters a'));
                let lastActive = null;
                function onScroll() {
                    let scrollPos = window.scrollY || window.pageYOffset;
                    let nav = document.querySelector('nav');
                    let navHeight = nav ? nav.offsetHeight : 0;
                    let found = false;
                    for (let i = headings.length - 1; i >= 0; i--) {
                        const heading = headings[i];
                        if (heading.offsetTop - navHeight - 20 <= scrollPos) {
                            sidebarLinks.forEach(l => l.classList.remove('active'));
                            const id = heading.id;
                            const link = sidebarLinks.find(l => l.getAttribute('href') === '#' + id);
                            if (link) link.classList.add('active');
                            found = true;
                            break;
                        }
                    }
                    if (!found) sidebarLinks.forEach(l => l.classList.remove('active'));
                }
                window.addEventListener('scroll', onScroll);
                onScroll();
            }
            highlightActiveSidebar();
        }
    });
    </script>
</body>
</html>