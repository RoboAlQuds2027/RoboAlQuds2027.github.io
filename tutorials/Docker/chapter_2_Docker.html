<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><!-- Tutorial Title Here --></title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            /* Summer sea vibe gradient: multi-color */
            background: linear-gradient(to bottom, 
                #ffffff 0%,
                #00F2FF 30%,
                #00b8ff 40%,
                #00719c 70%,
                #00415a 100%
            );
            min-height: 100vh;
        }
        

        /* Gradient animation matching main page */
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            25% {
                background-position: 100% 0%;
            }
            50% {
                background-position: 100% 50%;
            }
            75% {
                background-position: 0% 100%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        /* Enhanced floating particles animation */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(52, 152, 219, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 165, 0, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(26, 188, 156, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(155, 89, 182, 0.08) 0%, transparent 50%);
            animation: floatingParticles 15s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }

        @keyframes floatingParticles {
            0%, 100% {
                transform: translateY(0px) rotate(0deg) scale(1);
                opacity: 0.8;
            }
            33% {
                transform: translateY(-30px) rotate(120deg) scale(1.1);
                opacity: 0.6;
            }
            66% {
                transform: translateY(30px) rotate(240deg) scale(0.9);
                opacity: 0.4;
            }
        }

        /* Navigation matching main page style */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            gap: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        nav a {
            text-decoration: none;
            color: #666;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        nav a:hover, nav a.active {
            color: #007bff;
            background: rgba(0, 123, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Tutorial Container with modern styling */
        .tutorial-container {
            max-width: 1000px;
            margin: 2rem auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            padding: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            animation: fadeInUp 0.8s ease;
            position: relative;
            overflow: hidden;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Tutorial header styling */
        .tutorial-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            padding: 2rem 0;
        }

        .tutorial-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            border-radius: 2px;
        }

        .tutorial-header h1 {
            color: #222;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            margin-top: 1rem;
            position: relative;
        }

        .tutorial-meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            color: #666;
            font-size: 0.9rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .tutorial-meta span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1.1rem;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            color: #fff;
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%); /* Default: fluorescent green-blue */
            border: none;
            box-shadow: 0 2px 12px rgba(0,255,180,0.10);
            letter-spacing: 0.5px;
        }

        .difficulty-badge {
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .difficulty-badge.difficulty-beginner {
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%); /* Fluorescent green-blue */
            color: #003c2f;
        }

        .difficulty-badge.difficulty-intermediate {
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%); /* Fluorescent yellow-orange */
            color: #7a4f00;
        }

        .difficulty-badge.difficulty-advanced {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%); /* Fluorescent red-orange */
            color: #fff;
        }

        .tutorial-meta span:nth-child(2) {
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%); /* Yellow-orange */
            color: #7a4f00;
        }

        .tutorial-meta span:nth-child(3) {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%); /* Red-orange */
            color: #fff;
        }

        .tutorial-meta span:nth-child(4) {
            background: linear-gradient(90deg, #00eaff 0%, #00ffb0 100%); /* Blue-green */
            color: #003c2f;
        }

        /* Content styling */
        .tutorial-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #444;
        }

        .tutorial-content h1 {
            color: #222;
            font-size: 2.2rem;
            margin-top: 2.5rem;
            margin-bottom: 1.5rem;
            font-weight: 700;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .tutorial-content h1::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            border-radius: 2px;
        }

        .tutorial-content h2 {
            color: #007bff;
            font-size: 1.8rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .tutorial-content h3 {
            color: #0056b3;
            font-size: 1.4rem;
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .tutorial-content h4 {
            color: #495057;
            font-size: 1.2rem;
            margin-top: 1.2rem;
            margin-bottom: 0.6rem;
            font-weight: 600;
        }

        .tutorial-content p {
            margin-bottom: 1.2rem;
            color: #555;
        }

        .tutorial-content ul, .tutorial-content ol {
            margin-bottom: 1.5rem;
            padding-left: 1.5rem;
            color: #555;
        }

        .tutorial-content li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .tutorial-content blockquote {
            background: rgba(0, 123, 255, 0.05);
            border-left: 4px solid #007bff;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
            color: #0056b3;
            font-style: italic;
            position: relative;
        }

        .tutorial-content blockquote::before {
            content: '"';
            font-size: 3rem;
            color: #007bff;
            position: absolute;
            top: -0.5rem;
            left: 1rem;
            opacity: 0.3;
        }

        /* Code blocks styling */
        .tutorial-content pre {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 12px;
            overflow-x: auto;
            margin: 1.5rem 0;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tutorial-content code {
            background: rgba(0, 123, 255, 0.08);
            color: #0056b3;
            border-radius: 4px;
            padding: 0.2rem 0.4rem;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.98em;
        }

        .tutorial-content pre code {
            background: none;
            color: inherit;
            padding: 0;
            border-radius: 0;
        }

        /* Links styling */
        .tutorial-content a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .tutorial-content a::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #007bff, #00bcd4);
            transition: width 0.3s ease;
        }

        .tutorial-content a:hover::after {
            width: 100%;
        }

        .tutorial-content a:hover {
            color: #0056b3;
        }

        /* Images styling */
        .tutorial-content img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
            margin: 1.5rem 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Tables styling */
        .tutorial-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .tutorial-content th, .tutorial-content td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(0, 123, 255, 0.1);
        }

        .tutorial-content th {
            background: linear-gradient(45deg, #007bff, #00bcd4);
            color: white;
            font-weight: 600;
        }

        .tutorial-content tr:hover {
            background: rgba(0, 123, 255, 0.05);
        }

        /* CTA Button styling - clear orange with white text */
        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: linear-gradient(90deg, #00d0ff 0%, #3cff53 100%);
            color: #fff;
            text-decoration: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,152,0,0.15);
            margin: 1rem 0;
        }

        .cta-button:hover {
            background: linear-gradient(90deg, #ff3c3c 0%, #ff9800 100%);
            color: #fff;
            box-shadow: 0 8px 24px rgba(255,60,60,0.18);
        }

        .tutorial-content a.cta-button {
            color: #fff !important;
        }

        /* Navigation buttons - keep style but more visible */
        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #7a4f00;
            text-decoration: none;
            font-weight: 700;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            background: linear-gradient(90deg, #fff700 0%, #ffb300 100%);
            transition: all 0.3s ease;
        }

        .nav-button:hover {
            background: linear-gradient(90deg, #ff9800 0%, #ff3c3c 100%);
            color: #fff;
        }

        /* Navigation links - keep both buttons on one line, at both sides */
        .tutorial-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(0, 123, 255, 0.2);
        }

        /* Make the 'Next Tutorial' button green */
        .nav-button.next-tutorial {
            background: linear-gradient(90deg, #00ffb0 0%, #00eaff 100%);
            color: #003c2f;
        }

        .nav-button.next-tutorial:hover {
            background: linear-gradient(90deg, #ff9800 0%, #ff3c3c 100%);
            color: #fff;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tutorial-container {
                margin: 1rem;
                padding: 2rem 1.5rem;
            }

            .tutorial-header h1 {
                font-size: 2rem;
            }

            .tutorial-meta {
                flex-direction: column;
                gap: 1rem;
            }

            .tutorial-content h1 {
                font-size: 1.8rem;
            }

            .tutorial-content h2 {
                font-size: 1.5rem;
            }

            nav ul {
                gap: 1rem;
                padding: 0 1rem;
            }

            .tutorial-nav {
                flex-direction: column;
                gap: 1rem;
            }

            .tutorial-content pre {
                font-size: 0.8rem;
                padding: 1rem;
            }
        }

        /* Print styles */
        @media print {
            body {
                background: white;
            }
            
            body::before {
                display: none;
            }
            
            .tutorial-container {
                box-shadow: none;
                border: 1px solid #ddd;
                background: white;
            }
            
            nav {
                display: none;
            }
        }

        /* Prism.js overrides for better integration */
        .tutorial-content pre[class*="language-"] {
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            font-size: 1rem;
            margin: 1.5rem 0;
            padding: 1.2rem 1rem;
            overflow-x: auto;
        }
    </style>
    <!-- Prism.js for syntax highlighting -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" />
</head>
<body>
    <!-- Navigation -->
    <nav>
        <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../portfolio.html">Portfolio</a></li>
            <li><a href="../tutorials/index.html" class="active">Tutorials</a></li>
            <li><a href="../blog/index.html">Blog</a></li>
        </ul>
    </nav>

    <div class="tutorial-container">
        <!-- Tutorial Header -->
        <div class="tutorial-header">
            <h1>🌟Docker for Complete Beginners (Robotics)</h1>
            <div class="tutorial-meta">
                <span class="difficulty-badge difficulty-beginner">Beginner<!-- Beginner | Intermediate | Advanced --></span>
                <span>⏱️ 30 min<!-- Duration (e.g., 2-3 hours) --></span>
                <span>📅 August 2025<!-- Date (e.g., January 2025) --></span>
                <span>🏷️ Docker<!-- Tags (e.g., ROS 2, Python, Robotics) --></span>
            </div>
        </div>

        <!-- Tutorial Content -->
        <div class="tutorial-content">
            <!--
                HOW TO USE THIS TEMPLATE (Markdown):
                ===================================
                
                1. Write your tutorial content between the <script type="text/markdown" id="md-raw"> tags below.
                2. Do NOT indent your Markdown content. Start each line at the very beginning (no spaces or tabs).
                3. Indented lines will render as code blocks!
                
                Example (correct):
                <script type="text/markdown" id="md-raw">
# My Tutorial Title
Welcome!
- List item
</script>
                
                Example (incorrect):
                <script type="text/markdown" id="md-raw">
    # My Tutorial Title
    Welcome!
    - List item
</script>
                
                Supported Markdown: # ## ###, **bold**, *italic*, [links](url), ![img](url), code blocks, lists, blockquotes, tables, ---
            -->
            
            <script type="text/markdown" id="md-raw">

# Docker Development Environment Tutorial - Complete Beginner's Guide

## Table of Contents
1. [Introduction - Why This Tutorial Exists](#introduction)
2. [Prerequisites - What You Need to Know](#prerequisites) 
3. [The Problems We'll Solve Today](#problems-overview)
4. [Understanding Docker Basics](#docker-basics)
5. [Problem 1: File Permission Nightmares](#file-permissions)
6. [Problem 2: Graphical Programs Don't Work](#gui-problems)
7. [Problem 3: Networking Issues](#networking-issues)
8. [Building Our Solution Step by Step](#building-solution)
9. [Testing Everything Works](#testing)
10. [Complete Reference Files](#complete-files)
11. [Troubleshooting Guide](#troubleshooting)
12. [What's Next](#next-steps)

---

## Introduction - Why This Tutorial Exists {#introduction}

**Have you ever tried Docker and wanted to throw your computer out the window?** 

You're not alone! Every single person learning Docker hits these same frustrating problems:

- ❌ You create a file in Docker → Can't edit it on your computer ("Permission denied")
- ❌ You try to run a program with a window → "Error: cannot connect to X server" 
- ❌ Network programs act weird or don't work at all
- ❌ You spend hours Googling and nothing works

**The truth:** These aren't YOUR problems. These are Docker problems that EVERYONE faces.

**The good news:** We're going to fix ALL of these problems, step by step, so your Docker container works almost like your regular computer.

### What You'll Learn Today

By the end of this tutorial, you'll have a Docker container that:
- ✅ Lets you create and edit files normally (no more permission errors!)
- ✅ Runs programs with windows (like Firefox, text editors, 3D visualization tools)
- ✅ Connects to the internet normally
- ✅ Has a regular user account (not always "root")
- ✅ Supports command auto-completion
- ✅ Feels natural to use for development work

---

## Prerequisites - What You Need to Know {#prerequisites}

### Complete Beginner Test

**Before we start, let's check if you're ready:**

```bash
# Can you run this command and see "Hello from Docker!"?
docker run hello-world
```

**If you see the hello message:** Great! You're ready to continue.

**If you get an error:** You need to install Docker first. Go to [docker.com](https://docker.com) and install Docker Desktop for your system.

### Basic Concepts You Should Understand

Don't worry - these aren't scary! Think of them like this:

**Container = A Mini Computer**
- Like having a separate computer inside your computer
- Has its own files, programs, users
- Isolated from your main computer

**Image = The Recipe** 
- Instructions for creating a container
- Like a recipe for baking a cake
- One recipe can make many cakes (containers)

**Dockerfile = The Recipe Book**
- A text file with step-by-step instructions
- Tells Docker how to build your image
- We'll write one together!

**Quick Test - Understanding Check:**
- Container is like: _______ (mini computer)
- Image is like: _______ (recipe)  
- Dockerfile is like: _______ (recipe book)

If you got those, you're ready!

---

## The Problems We'll Solve Today {#problems-overview}

Let's see these problems in action so you know exactly what we're fixing.

### Problem 1: File Permission Hell

**Try this right now** (so you can see the problem):

```bash
# Create a test folder
mkdir docker-test
cd docker-test

# Run a basic container and create a file
docker run -it -v $(pwd):/workspace ubuntu:22.04 bash

# Inside the container, create a file
echo "Hello from container!" > /workspace/test-file.txt
exit

# Now try to edit the file on your computer
nano test-file.txt
# You might get "Permission denied" or need sudo!

# Check who owns the file
ls -l test-file.txt
# Output: -rw-r--r-- 1 root root 19 Jan 20 10:00 test-file.txt
```

**See the problem?** The file is owned by "root" (the superuser), not you!

### Problem 2: No Windows/GUI Programs

**Try this:**

```bash
# Try to run a graphical program
docker run -it ubuntu:22.04 bash

# Inside container, try to install and run Firefox
apt update && apt install -y firefox
firefox

# ERROR: Error: cannot connect to X server :0
```

**The problem:** The container can't draw windows on your screen!

### Problem 3: Network Weirdness

Some network tools behave differently in containers, and certain programs can't communicate properly.

**Now let's fix ALL of these problems!**

---

## Understanding Docker Basics {#docker-basics}

Before we dive into solutions, let's understand what's happening behind the scenes.

### How Docker Isolation Works

Think of Docker like this:

```
Your Computer (Host)               Docker Container
─────────────────────              ─────────────────
👤 You (username: alex)            👤 root (admin user)
🏠 Your files (/home/alex)         🏠 Container files (/root) 
🖥️ Your screen (Display :0)        🖥️ No screen access
🌐 Your network                    🌐 Separate network
```

**The isolation is GOOD for security, but BAD for development!**

### What We're Going to Do

We'll teach the container to:
1. **Share your user identity** → Fix file permissions
2. **Share your screen** → Enable GUI programs  
3. **Share your network** → Fix connectivity issues
4. **Set up a development environment** → Make it feel natural

---

## Problem 1: File Permission Nightmares {#file-permissions}

### Understanding Linux Users (Simple Version)

Every person using Linux has:
- **Username**: What humans call you (like "alex" or "sarah")
- **User ID (UID)**: What the computer calls you (a number like 1000)
- **Group ID (GID)**: What group you belong to (usually also 1000)

```bash
# Check your own information
id
# Output example: uid=1000(alex) gid=1000(alex) groups=1000(alex)...

# The number 1000 is what really matters to the computer!
```

### The Root Problem (Literally)

**In Docker by default:**
- You become user "root" (UID = 0) 
- Root is like the "boss" who owns everything
- When the boss creates files, regular users can't edit them

**Real-world analogy:**
- Root = Company CEO who owns all the files
- You = Employee who can't edit the CEO's documents
- We want to work as an employee, not always as the CEO!

### The Solution: Create a Matching User

We'll create a user inside Docker that has the same ID number as you!

**Step 1:** Find your user ID
```bash
# Find your user ID number
id -u
# Probably shows: 1000
```

**Step 2:** Create a Dockerfile that makes a matching user

Create a file called `Dockerfile`:

```dockerfile
# Start with Ubuntu (or ROS if you're using that)
FROM ubuntu:22.04

# Set up variables (like name tags)
ARG USERNAME=developer
ARG USER_UID=1000
ARG USER_GID=1000

# Create the user (like adding a new employee)
RUN groupadd --gid $USER_GID $USERNAME \
    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \
    && mkdir -p /home/$USERNAME/.config \
    && chown $USER_UID:$USER_GID /home/$USERNAME/.config
```

**Don't panic!** You don't need to memorize this. Here's what each line does:

- `ARG USERNAME=developer` → "Let's call our user 'developer'"
- `ARG USER_UID=1000` → "Give them ID number 1000 (same as you!)"
- `groupadd --gid $USER_GID $USERNAME` → "Create a group for our user"  
- `useradd --uid $USER_UID --gid $USER_GID -m $USERNAME` → "Create the user with the right ID and home folder"
- The rest → "Set up their home directory properly"

### Testing the Fix

```bash
# Build the image
docker build -t my-image .

# Test with the new user
docker run -it --user developer -v $(pwd):/workspace my-image

# Inside container - check who you are
whoami
# Should show: developer (not root!)

# Create a file
echo "Test file" > /workspace/test.txt
exit

# Check the file on your computer
ls -l test.txt
# Should show YOUR username, not root!
```

**The magic:** Both you and the container user have ID 1000, so files are compatible!

---

## Problem 2: Graphical Programs Don't Work {#gui-problems}

Getting graphics to work is tricky, but we'll break it down into simple steps.

### Understanding the Graphics System

**Linux graphics work like this:**
- Your screen is called a "display" (usually ":0")
- Programs need permission to draw on your display
- Docker containers are blocked from your display by default

**It's like:** Your container is trying to draw on a whiteboard, but the whiteboard is in a locked room!

### Step 1: Give Permission

On your main computer, run this command:
```bash
# Give permission for local programs to access your display
xhost +local:
```

**What this means:** "Let programs running locally draw on my screen"

### Step 2: Share the Graphics System

Add these flags to your `docker run` command:

```bash
docker run -it \
    --user developer \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    my-image
```

**New flags explained:**
- `-v /tmp/.X11-unix:/tmp/.X11-unix:rw` → "Share the graphics connection"
- `-e DISPLAY=$DISPLAY` → "Tell container which screen to use"

### Step 3: Test Graphics

```bash
# Run container with graphics support
docker run -it \
    --user developer \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    my-image

# Inside container, install and test a simple graphics program
apt update && apt install -y x11-apps
xeyes &

# You should see googly eyes following your mouse!
```

**If you see the eyes:** Congratulations! Graphics are working!

**If you get an error:** Check the troubleshooting section below.

---

## Problem 3: Networking Issues {#networking-issues}

### Understanding Docker Networking

**By default, Docker creates its own private network:**
- Container gets a different IP address  
- Some programs get confused
- Network discovery doesn't work the same way

### The Simple Solution: Host Networking

Add `--network host` to your docker run command:

```bash
docker run -it \
    --user developer \
    --network host \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    my-image
```

**What `--network host` does:** Makes the container share your computer's network directly.

### When to Use Host Networking

✅ **Good for development:**
- Everything "just works"
- No port mapping needed  
- Real-time programs work normally

❌ **Not for production:**
- Less secure
- Containers share all network access

### Testing Network Setup

```bash
# Run with host networking
docker run -it --network host my-image

# Check hostname - should match your computer
hostname
# Should show your computer name, not random letters

# Test internet connectivity
ping google.com
# Should work normally
```

---

## Building Our Solution Step by Step {#building-solution}

Now let's put together everything we've learned into a complete development environment.

### Step 1: Choosing the Right Base Image

**For general development:**
```dockerfile
FROM ubuntu:22.04
```

**For ROS development (Robot Operating System):**
```dockerfile
# Command line only (smaller)
FROM ros:humble

# With GUI programs (larger but includes visualization tools)
FROM osrf/ros:humble-desktop-full
```

**Which should you choose?**
- If you don't know what ROS is → Use Ubuntu
- If you're doing robotics → Use ROS with desktop-full

### Step 2: Adding Essential Development Tools

Update your Dockerfile:

```dockerfile
FROM ubuntu:22.04

# User setup (same as before)
ARG USERNAME=developer  
ARG USER_UID=1000
ARG USER_GID=1000

RUN groupadd --gid $USER_GID $USERNAME \
    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \
    && mkdir -p /home/$USERNAME/.config \
    && chown $USER_UID:$USER_GID /home/$USERNAME/.config

# Install essential tools
RUN apt-get update \
    && apt-get install -y \
        sudo \
        vim \
        git \
        curl \
        wget \
        bash-completion \
    && rm -rf /var/lib/apt/lists/*

# Give user sudo privileges (so they can install things)
RUN echo $USERNAME ALL=\(root\) NOPASSWD:ALL > /etc/sudoers.d/$USERNAME \
    && chmod 0440 /etc/sudoers.d/$USERNAME
```

 commands readable)

**The `&&` symbol:** Means "do this AND then do that, but only if the first thing worked"

### Step 4: Setting Up Auto-Completion

Create a file called `bashrc`:

```bash
# If this is an interactive shell, enable bash completion
if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
fi

# Add some helpful aliases
alias ll='ls -alF'
alias la='ls -A' 
alias l='ls -CF'

# Make the prompt colorful and informative
PS1='\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
```

Add to your Dockerfile:
```dockerfile
# Copy configuration files
COPY bashrc /home/$USERNAME/.bashrc
RUN chown $USER_UID:$USER_GID /home/$USERNAME/.bashrc
```

### Step 5: Creating an Entry Point Script

**What's an entry point script?** Think of it as a "setup helper" that runs every time your container starts.

Create a file called `entrypoint.sh`:

```bash
#!/bin/bash
set -e

# Print what command we're about to run (helpful for debugging)
echo "Starting container with command: $@"

# If we're using ROS, set it up (skip this line if not using ROS)
# source /opt/ros/humble/setup.bash

# Run whatever command the user wanted
exec "$@"
```

**Understanding each line:**
- `#!/bin/bash` → "This is a bash script"
- `set -e` → "Stop immediately if anything goes wrong"  
- `echo "Starting container..."` → "Show me what's happening"
- `exec "$@"` → "Now run the actual command the user requested"

Add to your Dockerfile:
```dockerfile
# Copy and set up entry point script
COPY entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

# Set entry point and default command
ENTRYPOINT ["/entrypoint.sh"]
CMD ["bash"]
```

### Step 6: Complete Development Dockerfile

Here's our complete Dockerfile:

```dockerfile
FROM ubuntu:22.04

# Prevent interactive prompts during build
ENV DEBIAN_FRONTEND=noninteractive

# User setup
ARG USERNAME=developer
ARG USER_UID=1000  
ARG USER_GID=1000

# Create user
RUN groupadd --gid $USER_GID $USERNAME \
    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \
    && mkdir -p /home/$USERNAME/.config \
    && chown $USER_UID:$USER_GID /home/$USERNAME/.config

# Install development tools
RUN apt-get update \
    && apt-get install -y \
        sudo \
        vim \
        git \
        curl \
        wget \
        bash-completion \
        x11-apps \
    && rm -rf /var/lib/apt/lists/*

# Set up sudo
RUN echo $USERNAME ALL=\(root\) NOPASSWD:ALL > /etc/sudoers.d/$USERNAME \
    && chmod 0440 /etc/sudoers.d/$USERNAME

# Copy configuration files
COPY bashrc /home/$USERNAME/.bashrc
COPY entrypoint.sh /entrypoint.sh
RUN chown $USER_UID:$USER_GID /home/$USERNAME/.bashrc \
    && chmod +x /entrypoint.sh

# Set up entry point
ENTRYPOINT ["/entrypoint.sh"]
CMD ["bash"]
```

---

## Testing Everything Works {#testing}

Let's test each feature to make sure everything works!

### Test 1: Building the Image

```bash
# Build your image
docker build -t my-dev-env .

# If successful, you should see:
# "Successfully tagged my-dev-env:latest"
```

**If you get errors:** Check that all your files are in the same directory as the Dockerfile.

### Test 2: User and Permissions

```bash
# Test user setup
docker run --rm --user developer my-dev-env whoami
# Should show: developer

# Test file permissions
mkdir test-workspace
docker run --rm --user developer -v $(pwd)/test-workspace:/workspace my-dev-env bash -c "echo 'test' > /workspace/file.txt"

# Check file ownership
ls -l test-workspace/file.txt
# Should show YOUR username, not root!
```

### Test 3: Sudo Access

```bash
# Test sudo works
docker run --rm --user developer my-dev-env sudo whoami  
# Should show: root
```

### Test 4: Graphics

```bash
# First, enable graphics on host
xhost +local:

# Test graphics
docker run --rm \
    --user developer \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    my-dev-env xeyes

# Should open a window with googly eyes!
```

### Test 5: Networking

```bash
# Test networking  
docker run --rm --network host my-dev-env ping -c 3 google.com
# Should show successful pings
```

### Test 6: Interactive Development Session

```bash
# Run a full development session
docker run -it \
    --user developer \
    --network host \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    -v $(pwd)/workspace:/workspace \
    my-dev-env

# Inside the container, test:
whoami          # Should show: developer
sudo whoami     # Should show: root  
ls /workspace   # Should show your files
xeyes &         # Should open GUI program
```

**If everything works:** Congratulations! You have a fully functional development environment!

---

## Complete Reference Files {#complete-files}

Here are all the files you need, ready to copy and paste:

### Dockerfile
```dockerfile
FROM ubuntu:22.04

# Prevent interactive prompts during build
ENV DEBIAN_FRONTEND=noninteractive

# User setup
ARG USERNAME=developer
ARG USER_UID=1000
ARG USER_GID=1000

# Create user
RUN groupadd --gid $USER_GID $USERNAME \
    && useradd --uid $USER_UID --gid $USER_GID -m $USERNAME \
    && mkdir -p /home/$USERNAME/.config \
    && chown $USER_UID:$USER_GID /home/$USERNAME/.config

# Install development tools
RUN apt-get update \
    && apt-get install -y \
        sudo \
        vim \
        git \
        curl \
        wget \
        bash-completion \
        x11-apps \
        build-essential \
    && rm -rf /var/lib/apt/lists/*

# Set up sudo
RUN echo $USERNAME ALL=\(root\) NOPASSWD:ALL > /etc/sudoers.d/$USERNAME \
    && chmod 0440 /etc/sudoers.d/$USERNAME

# Copy configuration files
COPY bashrc /home/$USERNAME/.bashrc
COPY entrypoint.sh /entrypoint.sh
RUN chown $USER_UID:$USER_GID /home/$USERNAME/.bashrc \
    && chmod +x /entrypoint.sh

# Set entry point
ENTRYPOINT ["/entrypoint.sh"]
CMD ["bash"]
```

### entrypoint.sh
```bash
#!/bin/bash
set -e

# Print what we're executing (helpful for debugging)
echo "Container starting with: $@"

# For ROS users, uncomment the next line:
# source /opt/ros/humble/setup.bash

# Execute the provided command
exec "$@"
```

### bashrc
```bash
# Enable bash completion if available
if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
fi

# Helpful aliases
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias grep='grep --color=auto'

# Colorful prompt
PS1='\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

# For ROS users, uncomment the next line:
# source /opt/ros/humble/setup.bash
```

### run.sh (Convenience Script)
```bash
#!/bin/bash

# Enable GUI applications
xhost +local: >/dev/null 2>&1

# Run the development container
docker run -it \
    --user developer \
    --network host \
    --ipc host \
    -v /tmp/.X11-unix:/tmp/.X11-unix:rw \
    -e DISPLAY=$DISPLAY \
    -v $(pwd)/workspace:/workspace \
    my-dev-env "$@"
```

Make it executable:
```bash
chmod +x run.sh
```

### How to Use Everything

1. **Create the files:** Put all four files (Dockerfile, entrypoint.sh, bashrc, run.sh) in the same directory

2. **Build the image:**
   ```bash
   docker build -t my-dev-env .
   ```

3. **Create a workspace:**
   ```bash
   mkdir workspace
   ```

4. **Run development environment:**
   ```bash
   ./run.sh
   ```

5. **Or run specific commands:**
   ```bash
   ./run.sh echo "Hello World"
   ./run.sh xeyes
   ```

---

## Troubleshooting Guide {#troubleshooting}

### Permission Problems

**Problem:** Files still owned by root
```bash
# Check your user ID
id -u
# If not 1000, update the Dockerfile:
# ARG USER_UID=1001  (or whatever your ID is)

# Rebuild the image
docker build -t my-dev-env .
```

**Problem:** "Permission denied" when running docker
```bash
# Add yourself to docker group
sudo usermod -aG docker $USER

# Log out and log back in, then test:
docker run hello-world
```

### Graphics Problems

**Problem:** "cannot connect to X server"
```bash
# Solution 1: Grant permission
xhost +local:

# Solution 2: Check DISPLAY variable
echo $DISPLAY
# Should show something like ":0"

# Solution 3: Test with simple program
docker run --rm -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix:rw my-dev-env xeyes
```

**Problem:** Graphics work but look ugly or have wrong fonts
```bash
# Share more system resources (add to docker run)
-v /etc/fonts:/etc/fonts:ro \
-v /usr/share/fonts:/usr/share/fonts:ro
```

### Network Problems

**Problem:** Internet doesn't work in container
```bash
# Check if Docker daemon is running
systemctl status docker

# Test basic connectivity
docker run --rm alpine ping google.com

# If that works but your container doesn't, rebuild with:
docker build --no-cache -t my-dev-env .
```

**Problem:** Programs can't find each other on network
```bash
# Make sure you're using host networking:
docker run --network host my-dev-env
```

### Build Problems

**Problem:** "Package not found" during build
```bash
# Clean Docker cache and rebuild
docker system prune
docker build --no-cache -t my-dev-env .
```

**Problem:** "File not found" during build
```bash
# Check all files are in the same directory as Dockerfile
ls -la
# Should show: Dockerfile, entrypoint.sh, bashrc, run.sh
```

### Common Error Messages

```
"docker: command not found"
→ Docker not installed or not in PATH

"Cannot connect to the Docker daemon"  
→ Docker service not running: sudo systemctl start docker

"Permission denied while trying to connect to Docker daemon"
→ Add user to docker group: sudo usermod -aG docker $USER

"bash: ./run.sh: Permission denied"
→ Make script executable: chmod +x run.sh

"standard_init_linux.go: exec: "/entrypoint.sh": permission denied"
→ Entry point script not executable (check Dockerfile has: RUN chmod +x /entrypoint.sh)
```

---

## What's Next {#next-steps}

Congratulations! You now have a Docker development environment that:
- ✅ Handles file permissions correctly
- ✅ Runs GUI applications  
- ✅ Has proper networking
- ✅ Includes a regular user account with sudo
- ✅ Supports command completion
- ✅ Works like a natural development environment

### Advanced Topics to Explore

1. **Docker Compose** - Managing multiple containers
2. **VS Code Dev Containers** - Integrated development 
3. **Hardware Access** - USB devices, cameras, GPUs
4. **Container Optimization** - Making images smaller and faster
5. **Security Hardening** - Production-ready containers

### Project Ideas to Practice

1. **Web Development Environment:** Add Node.js, Python, or your favorite language
2. **ROS Robotics Environment:** Switch to ROS base image and add robotics tools  
3. **Machine Learning Environment:** Add TensorFlow, PyTorch, Jupyter notebooks
4. **Game Development:** Add game engines and development tools

### Useful Resources

- [Docker Official Documentation](https://docs.docker.com/)
- [Docker Hub](https://hub.docker.com/) - Find existing images
- [VS Code Dev Containers](https://code.visualstudio.com/docs/devcontainers/containers)

### Getting Help

When you run into problems:
1. Check the troubleshooting section above
2. Search for your error message + "docker"
3. Ask on Stack Overflow with the "docker" tag
4. Check Docker community forums

**Remember:** Every Docker expert started exactly where you are now. These problems are normal, and now you know how to solve them!

---

## Quick Reference Card

### Essential Commands
```bash
# Build image
docker build -t my-dev-env .

# Run development environment  
./run.sh

# Run specific command
./run.sh <command>

# Enable GUI (run once per session)
xhost +local:

# Check if working
docker run --rm my-dev-env whoami  # Should show 'developer'
```

### File Structure
```
your-project/
├── Dockerfile
├── entrypoint.sh  
├── bashrc
├── run.sh
└── workspace/     # Your project files go here
```

### Emergency Commands
```bash  
# Stop all containers
docker stop $(docker ps -q)

# Remove all containers  
docker rm $(docker ps -a -q)

# Clean up everything
docker system prune -a
```

You did it! Welcome to effective Docker development! 🎉
            </script>
            
            <!-- The Markdown above will be rendered as HTML here -->
            <noscript>
                <div style="color: red; padding: 1rem; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px;">
                    <strong>JavaScript Required:</strong> Please enable JavaScript to view the tutorial content.
                </div>
            </noscript>
            <div id="md-content"></div>
        </div>

        <!-- Tutorial Navigation -->
        <div class="tutorial-nav">
            <a href="../../tutorials/index.html" class="nav-button">
                ← Back to Tutorials
            </a>
            <a href="../../tutorials/index.html" class="nav-button next-tutorial">
                Next Tutorial →
            </a>
        </div>
    </div>

    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Prism.js for syntax highlighting -->
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-cpp.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script>
    // Simple markdown rendering logic with Prism.js and robust fallback
    document.addEventListener('DOMContentLoaded', function() {
        const mdScript = document.getElementById('md-raw');
        const mdContent = document.getElementById('md-content');
        if (mdScript && mdContent && window.marked) {
            // Use default marked renderer for headings (let marked handle IDs)
            marked.setOptions({
                gfm: true,
                breaks: true,
                smartLists: true,
                smartypants: true
            });
            mdContent.innerHTML = marked.parse(mdScript.textContent.trim());
            Prism.highlightAll();

            // Helper: Normalize string for ID comparison
            function normalizeId(str) {
                return str.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
            }

            // Smooth scroll for TOC links (robust: match heading IDs even if special chars)
            mdContent.querySelectorAll('a[href^="#"]').forEach(link => {
                link.addEventListener('click', function(e) {
                    const href = this.getAttribute('href');
                    if (href && href.startsWith('#')) {
                        let target = document.getElementById(href.slice(1));
                        // If not found, try to find a heading with a similar normalized ID
                        if (!target) {
                          const allHeadings = mdContent.querySelectorAll('h1, h2, h3, h4, h5, h6');
                          for (const heading of allHeadings) {
                            if (normalizeId(heading.textContent) === normalizeId(href.slice(1))) {
                              target = heading;
                              break;
                            }
                          }
                        }
                        if (target) {
                            e.preventDefault();
                            // Offset for sticky nav
                            const nav = document.querySelector('nav');
                            const navHeight = nav ? nav.offsetHeight : 0;
                            const targetRect = target.getBoundingClientRect();
                            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                            const top = targetRect.top + scrollTop - navHeight - 10; // 10px extra offset
                            window.scrollTo({ top, behavior: 'smooth' });
                        }
                    }
                });
            });
        }
    });
    </script>
</body>
</html>